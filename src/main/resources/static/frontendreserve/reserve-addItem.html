<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>新增預約項目</title>
  <!-- SEO Meta Tags-->
  <meta name="description" content="EZDOM - Multipurpose Bootstrap HTML Template">
  <meta name="keywords"
    content="bootstrap, business, corporate, coworking space, services, creative agency, dashboard, e-commerce, mobile app showcase, saas, multipurpose, product landing, shop, software, ui kit, web studio, landing, dark mode, html5, css3, javascript, gallery, slider, touch, creative">
  <meta name="author" content="Createx Studio">
  <!-- Viewport-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Favicon and Touch Icons-->
  <link rel="icon" type="image/png" sizes="16x16" href="../frontendshop/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="../frontendshop/assets/favicon/site.webmanifest">
  <link rel="mask-icon" color="#6366f1" href="../frontendshop/assets/favicon/safari-pinned-tab.svg">
  <meta name="msapplication-TileColor" content="#080032">
  <meta name="msapplication-config" content="assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="white">
  <link rel="stylesheet" href="../frontendshop/assets/vendor/flatpickr/dist/flatpickr.min.css">
  <!-- Theme mode-->
  <!-- 引入 SweetAlert2 的 CSS 文件 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
  <script>
    let mode = window.localStorage.getItem('mode'),
      root = document.getElementsByTagName('html')[0];
    if (mode !== undefined && mode === 'dark') {
      root.classList.add('dark-mode');
    } else {
      root.classList.remove('dark-mode');
    }


  </script>
  <!-- Page loading styles-->
  <style>
    .vertical-text {
      white-space: nowrap;
      writing-mode: vertical-rl;
      /* 將文字垂直排列，從右至左 */
      /* 將文字旋轉 180 度，調整文字方向 */
    }

    .page-loading {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      -webkit-transition: all .4s .2s ease-in-out;
      transition: all .4s .2s ease-in-out;
      background-color: #fff;
      opacity: 0;
      visibility: hidden;
      z-index: 9999;
    }

    .dark-mode .page-loading {
      background-color: #121519;
    }

    .page-loading.active {
      opacity: 1;
      visibility: visible;
    }

    .page-loading-inner {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      text-align: center;
      -webkit-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: opacity .2s ease-in-out;
      transition: opacity .2s ease-in-out;
      opacity: 0;
    }

    .page-loading.active>.page-loading-inner {
      opacity: 1;
    }

    .page-loading-inner>span {
      display: block;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      font-weight: normal;
      color: #6f788b;
    }

    .dark-mode .page-loading-inner>span {
      color: #fff;
      opacity: .6;
    }

    .page-spinner {
      display: inline-block;
      width: 2.75rem;
      height: 2.75rem;
      margin-bottom: .75rem;
      vertical-align: text-bottom;
      background-color: #d7dde2;
      border-radius: 50%;
      opacity: 0;
      -webkit-animation: spinner .75s linear infinite;
      animation: spinner .75s linear infinite;
    }

    .dark-mode .page-spinner {
      background-color: rgba(255, 255, 255, .25);
    }

    @-webkit-keyframes spinner {
      0% {
        -webkit-transform: scale(0);
        transform: scale(0);
      }

      50% {
        opacity: 1;
        -webkit-transform: none;
        transform: none;
      }
    }

    @keyframes spinner {
      0% {
        -webkit-transform: scale(0);
        transform: scale(0);
      }

      50% {
        opacity: 1;
        -webkit-transform: none;
        transform: none;
      }
    }
  </style>
  <!-- Page loading scripts-->
  <script>
    (function () {
      window.onload = function () {
        const preloader = document.querySelector('.page-loading');
        preloader.classList.remove('active');
        setTimeout(function () {
          preloader.remove();
        }, 1500);
      };
    })();

  </script>
  <!-- Import Google Font-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"
    id="google-font">
  <!-- Vendor styles-->
  <!-- Main Theme Styles + Bootstrap-->
  <link rel="stylesheet" media="screen" href="../frontendshop/assets/css/theme.min.css">
</head>
<!-- Body-->

<body class="bg-secondary">
  <!-- Page loading spinner-->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div><span>Loading...</span>
    </div>
  </div>
  <!-- 頁首-->
  <main class="page-wrapper">
    <!-- Navbar. Remove 'fixed-top' class to make the navigation bar scrollable with the page-->
    <header class="navbar navbar-expand-lg fixed-top navbar-ignore-dark-mode ignore-dark-mode">
      <div class="container"><a class="navbar-brand pe-sm-3" href="index.html"><span
            class="text-primary flex-shrink-0 me-2">
            <svg version="1.1" width="35" height="32" viewBox="0 0 36 33" xmlns="http://www.w3.org/2000/svg">
              <path fill="currentColor"
                d="M35.6,29c-1.1,3.4-5.4,4.4-7.9,1.9c-2.3-2.2-6.1-3.7-9.4-3.7c-3.1,0-7.5,1.8-10,4.1c-2.2,2-5.8,1.5-7.3-1.1c-1-1.8-1.2-4.1,0-6.2l0.6-1.1l0,0c0.6-0.7,4.4-5.2,12.5-5.7c0.5,1.8,2,3.1,3.9,3.1c2.2,0,4.1-1.9,4.1-4.2s-1.8-4.2-4.1-4.2c-2,0-3.6,1.4-4,3.3H7.7c-0.8,0-1.3-0.9-0.9-1.6l5.6-9.8c2.5-4.5,8.8-4.5,11.3,0L35.1,24C36,25.7,36.1,27.5,35.6,29z">
              </path>
            </svg></span>EZ-DOM</a>
        <div class="form-check form-switch mode-switch order-lg-2 me-3 me-lg-4 ms-auto" data-bs-toggle="mode">
          <input class="form-check-input" type="checkbox" id="theme-mode">
          <label class="form-check-label" for="theme-mode"><i class="ai-sun fs-lg"></i></label>
          <label class="form-check-label" for="theme-mode"><i class="ai-moon fs-lg"></i></label>
        </div><a class="btn btn-primary btn-sm fs-sm order-lg-3 d-none d-sm-inline-flex"
          href="https://themes.getbootstrap.com/product/around-multipurpose-template-ui-kit/" target="_blank"
          rel="noopener">登入/註冊</a>
        <button class="navbar-toggler ms-sm-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span
            class="navbar-toggler-icon"></span></button>
        <nav class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav navbar-nav-scroll me-auto" style="--ar-scroll-height: 520px;">
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false">揪團 Group</a>
              <ul class="dropdown-menu">
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">揪團列表</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">My揪團</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">開團管理</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false">商城 Shop</a>
              <ul class="dropdown-menu">
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">瀏覽商品</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">購物車</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">管理我的訂單</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false">論壇 Forum</a>
              <ul class="dropdown-menu">
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">瀏覽論壇</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">論壇管理</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false">預約 Reserve</a>
              <ul class="dropdown-menu">
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">預約管理</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">瀏覽教練</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">時段管理</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">項目管理</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">自我介紹管理</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false">會員中心 Member</a>
              <ul class="dropdown-menu">
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">我的頁面</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">好友管理</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">收藏文章</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">收藏商品</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">個人設定</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#" data-bs-toggle="dropdown"
                    aria-expanded="false">聊天室</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false">聯絡客服 Help</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <!-- 頁首結束-->
    <div class="container py-5 mt-4 mt-lg-5 mb-lg-4 my-xl-5">
      <div class="row pt-sm-2 pt-lg-0">
        <!-- Sidebar (offcanvas on sreens < 992px)-->
        <aside class="col-lg-3 pe-lg-4 pe-xl-5 mt-n3">
          <div class="position-lg-sticky top-0">
            <div class="d-none d-lg-block" style="padding-top: 105px;"></div>
            <div class="offcanvas-lg offcanvas-start" id="sidebarAccount">
              <button class="btn-close position-absolute top-0 end-0 mt-3 me-3 d-lg-none" type="button"
                data-bs-dismiss="offcanvas" data-bs-target="#sidebarAccount"></button>
                <div class="offcanvas-body">
                  <div class="pb-2 pb-lg-0 mb-4 mb-lg-5"><img class="d-block rounded-circle mb-2" src="" width="80" alt="coachPicture" id="coachPicture">
                    <h3 class="h5 mb-1" id="name">教練名字</h3>
                    <p class="fs-sm text-muted mb-0" id="email">信箱</p>
                  </div>
                  <nav class="nav flex-column pb-2 pb-lg-4 mb-3">
                    <a class="nav-link fw-semibold py-2 px-0" id="details_href"><i class="ai-user-check fs-5 opacity-60 me-2"></i>個人資訊</a>
                    <a class="nav-link fw-semibold py-2 px-0 active" id="item_href"><i class="ai-menu fs-5 opacity-60 me-2"></i>預約項目</a>
                    <a class="nav-link fw-semibold py-2 px-0" id="time_href"><i class="ai-calendar-check fs-5 opacity-60 me-2"></i>預約時段</a>
                    <a class="nav-link fw-semibold py-2 px-0" id="message_href"><i class="ai-file-text fs-5 opacity-60 me-2"></i>留言板</a>
                    <a class="nav-link fw-semibold py-2 px-0" id="setting_href" style="display: none;"><i class="ai-settings fs-5 opacity-60 me-2"></i>設置</a>
                    <a class="nav-link fw-semibold py-2 px-0" id="report_href" style="display: none;"><i class="ai-dislike fs-5 opacity-60 me-2"></i>檢舉教練</a>
                  </nav>
                </div>
        </aside>
        <!-- Page content-->
        <div class="col-lg-9 pt-4 pb-2 pb-sm-4">
          <h1 class="h2 mb-4">新增預約項目</h1>
          <!-- 檢舉教練 -->
          <section class="card border-0 py-1 p-md-2 p-xl-3 p-xxl-4">
            <div class="card-body">
              <div class="d-flex align-items-center pb-4 mt-sm-n1 mb-0 mb-lg-1 mb-xl-3">
              </div>
              <div class="row row-cols-1 row-cols-md-2 g-4">
                <!-- Text input -->
                <div style="width: 380px;" class="mb-3">
                  <label for="coachName" class="form-label">教練名稱</label>
                  <input class="form-control" type="text" id="coachName" disabled>
                  <p id="coachNameError" style="color: red;"></p>
                </div>
                <!-- Text input -->
                <div class="mb-3">
                  <label for="place" class="form-label">課程地點</label>
                  <input class="form-control" type="text" id="place">
                  <p id="placeError" style="color: red;"></p>
                </div>
                <!-- Form help text -->
                <div style="width: 380px;" class="mb-3">
                  <label for="amount" class="form-label">金額</label>
                  <input class="form-control" type="number" id="amount">
                  <p id="amountError" style="color: red;"></p>
                </div>

                <div class="mb-3">
                  <label for="project" class="form-label">課程項目</label>
                  <input class="form-control" type="text" id="project">
                  <p id="projectError" style="color: red;"></p>
                </div>

                <!-- Textual addon + select -->


                <!-- Icon addon + textarea -->

                <div class="input-group">
                  <span class="input-group-text align-self-start mt-1">
                    <i class="ai-message"></i>
                  </span>
                  <textarea id="introduction" class="form-control" placeholder="輸入課程介紹" rows="4"></textarea>
                  <p id="introductionError" style="color: red;" class="vertical-text"></p>
                </div>

                <!-- Submit solid button -->
                <button type="button" class="btn btn-primary" id="confirmBtn">確定新增</button>
                <!-- Cancel solid button -->
                <button type="button" class="btn btn-secondary" id="cancelBtn">取消</button>
                <!-- Divider for dark mode only-->
                <hr class="d-none d-dark-mode-block">
                <!-- Sidebar toggle button-->
                <button class="d-lg-none btn btn-sm fs-sm btn-primary w-100 rounded-0 fixed-bottom"
                  data-bs-toggle="offcanvas" data-bs-target="#sidebarAccount"><i class="ai-menu me-2"></i>Account
                  menu</button>
  </main>
  <!-- Footer-->
  <footer class="footer bg-secondary py-5">
    <div class="container pt-1 pt-sm-2 pt-md-3 pt-lg-4 pt-xl-5">
      <div class="border-bottom text-center pb-4"><a class="navbar-brand d-inline-flex text-nav py-0 mb-3 mb-md-4"
          href="index.html"><span class="text-primary flex-shrink-0 me-2">
            <svg version="1.1" width="35" height="32" viewBox="0 0 36 33" xmlns="http://www.w3.org/2000/svg">
              <path fill="currentColor"
                d="M35.6,29c-1.1,3.4-5.4,4.4-7.9,1.9c-2.3-2.2-6.1-3.7-9.4-3.7c-3.1,0-7.5,1.8-10,4.1c-2.2,2-5.8,1.5-7.3-1.1c-1-1.8-1.2-4.1,0-6.2l0.6-1.1l0,0c0.6-0.7,4.4-5.2,12.5-5.7c0.5,1.8,2,3.1,3.9,3.1c2.2,0,4.1-1.9,4.1-4.2s-1.8-4.2-4.1-4.2c-2,0-3.6,1.4-4,3.3H7.7c-0.8,0-1.3-0.9-0.9-1.6l5.6-9.8c2.5-4.5,8.8-4.5,11.3,0L35.1,24C36,25.7,36.1,27.5,35.6,29z">
              </path>
            </svg></span><span>EZ-DOM</span></a>
        <ul class="nav justify-content-center py-1 pb-sm-2">
          <li class="nav-item"><a class="nav-link py-2 px-3 mx-1" href="#">Classes</a></li>
          <li class="nav-item"><a class="nav-link py-2 px-3 mx-1" href="#">Trainers</a></li>
          <li class="nav-item"><a class="nav-link py-2 px-3 mx-1" href="#">Schedule</a></li>
          <li class="nav-item"><a class="nav-link py-2 px-3 mx-1" href="#">Pricing</a></li>
          <li class="nav-item"><a class="nav-link py-2 px-3 mx-1" href="#">Contact</a></li>
        </ul>
      </div>
      <div class="d-sm-flex align-items-center justify-content-between pt-4 mt-2 mt-sm-0">
        <div class="d-flex justify-content-center order-sm-2 mb-4 mb-sm-0"><a
            class="btn btn-icon btn-sm btn-secondary btn-instagram rounded-circle me-3" href="#"><i
              class="ai-instagram"></i></a><a class="btn btn-icon btn-sm btn-secondary btn-facebook rounded-circle me-3"
            href="#"><i class="ai-facebook"></i></a><a
            class="btn btn-icon btn-sm btn-secondary btn-youtube rounded-circle" href="#"><i class="ai-youtube"></i></a>
        </div>
        <p class="fs-sm order-sm-1 text-center mb-0"><span class="opacity-70">&copy; All rights reserved. Made by
          </span><a class="nav-link d-inline fw-normal p-0" href="https://createx.studio/" target="_blank"
            rel="noopener">Createx Studio</a></p>
      </div>
    </div>
  </footer>

  <!-- Back to top button--><a class="btn-scroll-top" href="#top" data-scroll>
    <svg viewBox="0 0 40 40" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <circle cx="20" cy="20" r="19" fill="none" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10">
      </circle>
    </svg><i class="ai-arrow-up"></i></a>
  <!-- Vendor scripts: js libraries and plugins-->
  <script src="../frontendshop/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../frontendshop/assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
  <script src="../frontendshop/assets/vendor/jarallax/dist/jarallax.min.js"></script>
  <script src="../frontendshop/assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="../frontendshop/assets/vendor/lightgallery/lightgallery.min.js"></script>
  <script src="../frontendshop/assets/vendor/lightgallery/plugins/fullscreen/lg-fullscreen.min.js"></script>
  <script src="../frontendshop/assets/vendor/lightgallery/plugins/zoom/lg-zoom.min.js"></script>
  <script src="../frontendshop/assets/vendor/flatpickr/dist/flatpickr.min.js"></script>
  <script src="../frontendshop/assets/vendor/flatpickr/dist/plugins/rangePlugin.js"></script>
  <!-- Main theme script-->
  <script src="../frontendshop/assets/js/theme.min.js"></script>
  <!-- 引入 SweetAlert2 的 JavaScript 文件 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>


  <script>
    let coachName = document.getElementById("coachName");
    let place = document.getElementById("place");
    let amount = document.getElementById("amount");
    let project = document.getElementById("project");
    let introduction = document.getElementById("introduction");
    let coachNameError = document.getElementById("coachNameError");
    let placeError = document.getElementById("placeError");
    let amountError = document.getElementById("amountError");
    let projectError = document.getElementById("projectError");
    let introductionError = document.getElementById("introductionError");
    let confirmBtn = document.getElementById("confirmBtn");
    function validateProject() {
      if (!project.value) {
        projectError.textContent = "請勿為空值";
        return false;
      } else {
        projectError.textContent = "";
        return true;
      }
    }

    function validateIntroduction() {
      if (!introduction.value) {
        introductionError.textContent = "必填";
        return false;
      } else {
        introductionError.textContent = "";
        return true;
      }
    }

    function validateCoachName() {
      if (!coachName.value) {
        coachNameError.textContent = "請勿為空值";
        return false;
      } else {
        coachNameError.textContent = "";
        return true;
      }
    }

    function validatePlace() {
      if (!place.value) {
        placeError.textContent = "請勿為空值";
        return false;
      } else {
        placeError.textContent = "";
        return true;
      }
    }
    function validateAmount() {
      var amountPattern = /^[0-9]+$/;

      if (!amount.value) {
        amountError.textContent = "請勿為空值";
        return false;
      } else if (!amountPattern.test(amount.value)) {
        amountError.textContent = "僅能輸入數字";
        return false;
      } else {
        amountError.textContent = "";
        return true;
      }
    }
    //新增項目
    confirmBtn.addEventListener("click", function () {
      let projectValid = validateProject();
      let introductionValid = validateIntroduction();
      let coachNameValid = validateCoachName();
      let placeValid = validatePlace();
      let amountValid = validateAmount();

      var isValid = projectValid && introductionValid && coachNameValid && placeValid && amountValid;
      if (isValid) {
        fetch('http://localhost:8080/ezdom/frontend/reserve/addItem', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            reserveItem: project.value,
            place: place.value,
            content: introduction.value,
            amounts: amount.value
          }),
        }).then(response => {
              if (response.status === 401) {
                // 重定向到登录页面 登入失敗
                window.location.href = '/ezdom/frontendmember/account-signin.html';
              } else if (response.ok) {
                //登入成功
                return response.json();
              } else {
                alert("錯誤狀態" + response.status);
                return;
              }
            })
          .then(body => {
            let { message, successful } = body;
            if (successful) {
              Swal.fire({
                icon: 'success',
                title: '成功',
                text: `${message}`,
                confirmButtonText: '確定'
              }).then((result) => {
                if (result.isConfirmed) {
                  window.location.replace(`reserve-appointmentArea.html?coachId=${url_coachId}`);
                }
              })
            }
          })
      } else {
        Swal.fire({
          icon: 'error',
          title: '資料尚未完善',
          text: '請再次確認有無錯誤',
          confirmButtonText: '確定'
        });
      }
    })

    //返回
    cancelBtn.addEventListener("click", function () {
      Swal.fire({
        icon: 'question',
        title: '返回',
        text: `是否確定返回?`,
        confirmButtonText: '確定',
        cancelButtonText: '取消',
        showCancelButton: true
      }).then((result) => {
        if (result.isConfirmed) {
          window.history.back();
        }
      })
    })

    //找教練名
    function findCoach() {
      fetch('http://localhost:8080/ezdom/frontend/reserve/coach/name/' + url_coachId)
        .then(response => {
              if (response.status === 401) {
                // 重定向到登录页面 登入失敗
                window.location.href = '/ezdom/frontendmember/account-signin.html';
              } else if (response.ok) {
                //登入成功
                return response.json();
              } else {
                alert("錯誤狀態" + response.status);
                return;
              }
            })
        .then(body => {
          let { nickname } = body
          coachName.value = nickname;
        })
    }


    // findCoach();


    // ====================== 宣告變數 ====================== //
    let coachDetails;
    let coachMessage;
    // 側邊欄大頭貼
    const coachPicture = document.querySelector("#coachPicture");
    // 側邊欄姓名
    const d_coachName = document.querySelector("#name");
    // 側邊欄信箱
    const coachEmail = document.querySelector("#email");
    // 側邊欄個人資訊的連結
    const detailsURL = document.querySelector("#details_href");
    // 側邊欄預約項目的連結
    const itemURL = document.querySelector("#item_href");
    // 側邊欄預約時段的連結
    const timeURL = document.querySelector("#time_href");
    // 側邊欄留言板的連結
    const messageURL = document.querySelector("#message_href");
    // 側邊欄設置的連結
    const settingURL = document.querySelector("#setting_href");
    // 側邊欄檢舉教練的連結
    const reportURL = document.querySelector("#report_href");
    // 模擬登入中的教練ID
    const coachId = 1;
    // ====================== 側邊欄資訊 ====================== //
    const url = new URLSearchParams(window.location.search);
    const url_coachId = url.get('coachId'); // 取得URL中查詢字串coachId的值。哪個教練的留言板
    const d_req = 'http://localhost:8080/ezdom/frontend/browse/list/' + url_coachId;

    async function getCoachDetails() {

        try {
          let response = await fetch(d_req);

        if (response.status === 401) {
            // 重定向到登录页面 登入失敗
            window.location.href = '/ezdom/frontendmember/account-signin.html';
        } else if (response.ok) {
            // 登入成功
            coachDetails = await response.json();
        } else {
            alert("錯誤狀態 " + response.status);
        }
    } catch (error) {
        console.error("出现错误: " + error);
    }

<!--      let response = await fetch(d_req);-->
<!--      coachDetails = await response.json();-->
      console.log(coachDetails);
      showCoachDetails();
    }

    function showCoachDetails() {
      let imgUrl = "data:image/jpeg;base64," + coachDetails.picture;

      coachPicture.src = imgUrl;
      d_coachName.innerHTML = `${coachDetails.nickname}`;
      coachEmail.innerHTML = `${coachDetails.email}`;
      detailsURL.href = `../frontendcoach/coach-details.html?coachId=${coachDetails.coachId}`;
      itemURL.href = `reserve-appointmentArea.html?coachId=${coachDetails.coachId}`;
      timeURL.href = `reserve-memberDate.html?coachId=${coachDetails.coachId}`;
      messageURL.href = `../frontendcoach/coach-message.html?coachId=${coachDetails.coachId}`;
      settingURL.href = `../frontendcoach/coach-settings.html?coachId=${coachDetails.coachId}`;

      // 留言板標題
      // let bord = document.querySelector("#message_bord");
      // let h1 = document.createElement("h1");
      // h1.setAttribute("class", "h2 mb-4 display-6");
      // h1.innerHTML = `${coachDetails.nickname}的留言板`;
      // bord.appendChild(h1);

      /*
          1. 判斷登入中的會員是否為教練
          2. 若是，判斷該會員的 coachId，是否與所點擊教練頁面的 coachID相同
          3. 若是，則讓設置的選項 show出
      */
     
      if (coachId === coachDetails.coachId) {
        settingURL.style = "";
        reportURL.style = "display:none";
      }

    }

    window.addEventListener("load", function () {
      getCoachDetails();
      findCoach();

    })


  </script>
</body>

</html>